
# 简介
commitment最大的优势是用来`远程`进行公平的博弈，而不需要一个第三方裁判的存在。

# 不见面的猜拳
诸葛亮想和曹操猜拳，但是两人身处异地无法见面。这种情况下如何保证公平呢？

如果诸葛亮把自己的信封用快马送给曹操，那曹操可以拆开看到诸葛亮的出拳之后再写自己的信。信封这个解法不行了，不过如果用一点密码学，还是可以异地猜拳。我们假设诸葛亮有一个抵抗冲撞的哈希函数(collision-resistant hash function) f(x)，满足如下的条件：

(1) 从 x 很容易计算f(x)。

(2) 非常难找到两个x, y 满足f(x) = f(y).

诸葛亮先确定一个选择 m {石头，剪刀，布} 。然后再选择一串随机数r, 把自己的承诺 y = f(r , m) 发给曹操。曹操同样把自己的“承诺" y' 发给诸葛亮。

诸葛亮等自己收到曹操的承诺y'以后，再把随机数r和自己的出拳z发送过去。曹操等收到承诺之后，做同样的事。

曹操通过计算f(r, m) = y 来确保诸葛亮没有作弊。


现在双方可以比较彼此的出拳，来决定谁胜谁负！问题是: 为什么这样可以杜绝一方作弊？

假设诸葛亮想要作弊，那他必须在收到曹操的所有信息之后再发送（r,z）。现在假设诸葛亮想把自己的出拳改成 m' , 那么他必须找到另一个随机数r'，满足

f(r , m) = f(r', m'). 

然而！根据对函数 f 的假设，在有生之年诸葛亮是找不到r' 的。所以他没有办法作弊：任何他能找到的r', 曹操计算出的承诺 f(r',m') 都和 y 对不上，所以曹操能看出他有没有“慢出”！

## 经典的应用场景
假设一件古董的买方和卖方的出价底线分别是a元和b元，他们希望达成如下的协定：如果a < b，那么交易失败；如果 a >= b， 那么交易在中间价格 (a + b)／2 上成交。

当然买家不能把自己的底线a透露给卖家，那么卖家可以出价a, 从而在高位成交；反之也同理。如何隐藏自己的底线价格呢？

用commitment！就是买卖双方(1) 先公开自己出价的commitment，然后(2) 公开价格。由于commitment具有隐藏性，所以在步骤（1）之后双方都无法推测对方的价格；又由于commitment具有不可更改的特性，所以任何一方都无法在步骤（2）中更改自己之前承诺（commit) 的价格 ! 