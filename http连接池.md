
## HttpClien高并发请求连接池 - PoolingHttpClientConnectionManager
`长连接`是指客户端与服务器端一旦建立连接以后，可以进行多次数据传输而不需重新建立连接，长连接的优势在于省去了每次数据传输连接建立的时间开销，能够大幅度提高数据传输的速度。

`短连接`每次数据传输都需要建立连接，HTTP协议的传输层协议是TCP协议，TCP连接的建立和释放分别需要进行3次握手和4次握手，频繁的建立连接即增加了时间开销，同时频繁的创建和销毁Socket同样是对服务器端资源的浪费。
**所以对于需要频繁发送HTTP请求的应用，需要在客户端使用HTTP长连接。**

HTTP连接是无状态的，很容易给我们造成HTTP连接是短连接的错觉，实际上HTTP1.1默认即是持久连接，HTTP1.0也可以通过在请求头中设置`Connection:keep-alive`使得连接为长连接。既然HTTP协议支持长连接，我们就有理由相信HTTP连接同样需要连接池技术来管理和维护连接建立和销毁。HTTP Client4.0的ThreadSafeClientConnManager实现了HTTP连接的池化管理，其管理连接的基本单位是Route（路由），每个路由上都会维护一定数量的HTTP连接。这里的Route的概念可以理解为客户端机器到目标机器的一条线路，例如使用HttpClient的实现来分别请求 www.163.com 的资源和 www.sina.com 的资源就会产生两个route。缺省条件下对于每个Route，HttpClient仅维护2个连接，总数不超过20个连接，显然对于大多数应用来讲，都是不够用的，可以通过设置HTTP参数进行调整。